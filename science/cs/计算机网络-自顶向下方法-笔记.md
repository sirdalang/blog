# 计算机网络-自顶向下方法-笔记

本书作者：James F.Kurose, Keith W.Ross  
译者：陈鸣  
出版社：  机械工业出版社  

## 1 计算机网络和因特网

### 1.1 什么是因特网

#### 1.1.1 具体构成描述

- 因特网是一个世界范围的计算机网络，即它是一个互联了遍及全世界数十亿计算设备的网络。  
- 用因特网术语来说，所有这些设备都称为**主机**或**端系统**。  
- 端系统通过**通信链路**和**分组交换机**连接到一起。  
- 不同的链路能够以不同的速率传输数据，链路的**传输速率**以比特每秒（bps）度量。  
- 当一台端系统要向另一台端系统发送数据时，发送端系统将数据分段，并为每段加上首部字节。由此形成的信息包用计算机网络的术语来说称为**分组**。  
- 市面上流行着各种类型、各具特色的分组交换机，但在当今的因特网中，两种最著名的类型是**路由器**和**链路层交换机**。  
- 从发送端系统到接收端系统，一个分组所经历的一系列通信链路和分组交换机称为通过该网络的**路径**。  
- 端系统通过**因特网服务提供商**（ISP）接入因特网。每个 ISP 自身就是一个由多台分组交换机和多段通信链路组成的网络。  
- 端系统、分组交换机和其它因特网不见都要运行一系列**协议**，这些协议控制因特网中信息的接受和发送。**TCP** 和 **IP** 是因特网中两个最为重要的协议。因特网的主要协议统称为 **TCP/IP**。  
- **因特网标准**由因特网工程任务组（IETF）研发。IETF 的标准文档称为 RFC（Request For Comment）。  

#### 1.1.2 服务描述

- 从一个完全不同的角度，即从为应用程序提供服务的基础设施的角度来描述因特网。  
- 除了诸如电子邮件和 Web 冲浪等传统应用外，因特网应用还包括移动智能手机和平板电脑应用程序，其中包括即时讯息、与实时道路流量信息的映射、来自云的音乐流、电影和电视流、在线社交网络、视频会议、多人游戏以及基于位置的推荐系统。因为这些应用程序涉及多个相互交换数据的端系统，故它们被称为**分布式应用程序**。  
- 因特网应用程序运行在端系统上，即它们并不运行在网络核心中的分组交换机中。  
- 与因特网相连的端系统提供了一个**套接字接口**，该接口规定了运行在一个端系统上的程序请求因特网基础设施向运行在另一个端系统上的特定目的地程序交付数据的方式。  

#### 1.1.3 什么是协议

- **协议**定义了在两个或多个通信实体之间交换的报文的格式和顺序，以及报文发送和/或接受一条报文或其它事件所采取的动作。  

### 1.2 网络边缘

- 端系统也称为主机，因为它们容纳应用程序。  
- 主机有时又被进一步划分为两类：**客户**和**服务器**。  

#### 1.2.1 接入网

- **接入网**，是指将端系统物理连接到其**边缘路由器**的网络。边缘路由器是端系统到任何其它远程系统的路径上的第一台路由器。  
- 家庭接入：DSL、电缆、FTTH、拨号和卫星。  
- 企业（和家庭）接入：以太网和 WIFI。  
- 广域无线接入：3G 和 LTE 。  

#### 1.2.2 物理媒体

- 对于每个发射器 - 接收器对，通过跨越一种**物理媒体**传播电磁波或光脉冲来发送该比特。  
- 物理媒体分成两种类型：**导引型媒体**和**非导引型媒体**。  
- 双绞铜线、同轴电缆、光纤、陆地无线电信道、卫星无线电通信。  

### 1.3 网络核心

#### 1.3.1 分组交换

- 在各种网络应用中，端系统彼此交换**报文**。  
- 为了从源端系统向目的端系统发送一个报文，源将长报文划分为较小的数据块，称之为**分组**。  
- 在源和目的地之间，每个分组都通过通信链路和**分组交换机**传送。（交换机主要由两类：路由器和链路层交换机）。

##### 1.3.1.1 存储转发传输

- 多数分组交换机在链路的输入端使用**存储转发传输**机制。  
- 存储转发传输是指在交换机能够开始向输出链路传输该分组的第一个比特之前，必须接受到整个分组。  
  假设不考虑链路传播时延，那么对于一条链路，发送数据结束时接收数据也同时结束，也即一条链路的时延为发送数据的时延，端到端的时延为所有链路上发送数据的时延之和。  
  设 $L$ 为分组大小，$R_i$ 为第 $i$ 条链路的传输速率，路径上总共有 $n$ 条链路，则端到端时延 $d$ 为  
  $\displaystyle d=\sum_{i=1}^n \frac{L}{R_i}$  
- 存储转发机制引起的时延称为**转发时延**。  

##### 1.3.1.2 排队时延和分组丢失

- 对于每条相连的链路，分组交换机具有一个**输出缓存**（或者叫输出队列），它用于存储路由器准备发往那条链路的分组。如果到达的分组需要传输到某条链路，但发现该链路正忙于传输其他分组，该到达分组必须在输出缓存中等待。因此除了转发时延以外，分组还要承受输出缓存的**排队时延**。  
- 由于缓存是有限的，一个到达的分组可能发现该缓存已经被其它等待传输的分组完全充满了。在此情况下，将出现**分组丢失**（丢包）。  

##### 1.3.1.3 转发表和路由选择协议

- 每台路由器具有一个**转发表**，用于将目的地址映射称为输出链路。  
- 因特网具有一些特殊的**路由选择协议**，用于自动地设置这些转发表。  

#### 1.3.2 电路交换

- 通过网络链路和交换机移动数据有两种基本方法：**电路交换**和**分组交换**。  
- 考虑当一个人通过电话网向另一个人发送信息时发生的情况。在发送方能够发送信息之前，该网络必须在发送放和接收方之间建立一条连接。这是一个名副其实的连接，因为此时沿着发送方和接收方之间路径上的交换机都将为该连接维护连接状态。用电话的术语来说，该连接被称为一条**电路**。  
- 相比电路交换网络，分组交换网络中，分组被发送进网络，而不预留任何链路资源之类的东西。  

##### 1.3.2.1 电路交换网络中的复用

- 链路中的电路是通过**频分复用**（FDM）或**时分复用**（TDM）来实现的。  
- 电路交换不考虑需求，而预先分配了传输链路的使用，这使得已分配而并不需要的链路时间未被利用。另一方面，分组交换按需分配链路使用。链路传输能力在所有需要在链路上传输分组的用户之间逐分组地被共享。  

#### 1.3.3 网络的网络

- 让端用户和内容提供商连接到接入 ISP 仅解决了连接难题中的很小一部分，因为因特网是由数亿计的用户构成的。要解决这个难题，接入 ISP 自身必须互联。通过创建**网络的网络**可以做到这一点。  
- 构成因特网的“网络的网络”已经演化成为一个非常复杂的结构。这种演化很大部分是由经济和国家策略驱动的，而不是由性能考虑驱动的。  
- 第一个网络结构，即