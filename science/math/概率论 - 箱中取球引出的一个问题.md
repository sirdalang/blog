# 概率论 - 箱中取球引出的一个问题

[toc]

## 一、前言

在考研数学复习时，《考研数学复习全书 - 数学一 · 李永乐 王式安...》概率论部分有一题出现了理解上的困难，查资料后有些收获，整理如下：

a 书中结论并不正确（确定）

b 要理解条件概率

c 要知道全概率公式进行概率分解的时候的隐藏的前提条件

## 二、条件概率

定义：设A、B是两个事件，且 $P(A)>0$ ，称

$P(B|A)=\frac{P(AB)}{A}$

为在事件A发生条件下事件B发生的条件概率。

注：这里是直接定义，因此不需要证明为什么是这样（因为有人问如何证明是这种形式）。

由条件概率，直接可得概率的乘法公式

$P(AB)=P(A)P(B|A)$
$P(AB)=P(B)P(A|B)$

注：这里 $P(A)>0$，$P(B)>0$ 是条件概率定义的要求。

推广：

$P(ABC)=P(AB)P(C|AB)=P(A)P(B|A)P(C|AB)$ （三个事件）

注：之前之所以做错就是因为这里公式推导错了。

## 三、题目原型

例九 假设有两箱同种零件，第一箱内装 $n$ 件一等品，第二箱内装 $m$ 件，其中仅有一件一等品（ $m$ 、$n$ 均大于2）。现从两箱中随意挑出一箱，然后从该箱箱后随机取出两个零件（不放回），试求：

（1）先取出的零件是一等品的概率 $p$；

（2）在先取出的零件是一等品的条件下，第二次取出的零件仍然是一等品的条件概率 $q$。

解：

记A为挑出的是第一箱，记为第i次取出的零件是一等品。

（1）第一问没有问题。

$p=P(B_1)=P(B_1A)+P(B_1\overline{A})=P(A)P(B_1|A)+P(\overline{A})(PB_1|\overline{A})$

即

$p=\frac{1}{2}\times1+\frac{1}{2}\times\frac{1}{m}=\frac{m+1}{2m}$


（2）第二问出现了问题。

书中解答：

设先取出的零件是一等品的条件下，第二次取出的零件仍然是一等品，这个事件为C。

$q=P(C)=P(C|A)P(A)+P(C|\overline{A})P(\overline{A})$

也即

$q=1\times \frac{1}{2}+0\times \frac{1}{2}=\frac{1}{2}$

这个答案不对，原因后文分析。正确解答如下：

$q=P(B_2|B_1)=\frac{P(B_1B_2)}{P(B_1)}$

其中，

$P(B_1B_2)=P(B_1B_2A)+P(B_1B_2\overline{A})$

由于取第二个箱子时，不可能成立，因此

$P(B_1B_2\overline{A})=0$

$P(B_1B_2A)=P(AB_1)P(B_2|AB_1)=P(A)P(B_1|A)P(B_2|AB_1)$
$=\frac{1}{2}\times1\times1=\frac{1}{2}$


故 $q=\frac{\frac{1}{2}}{\frac{m+1}{2m}}=\frac{m}{m+1}$。

## 四、错误分析

对等式
$p=P(B_1)=P(B_1A)+P(B_1\overline{A})=P(A)P(B_1|A)+P(\overline{A})(PB_1|\overline{A})$。

由定义知，$P(C)$ 本身是一个条件概率，且 $P(C)=P(B_2|B_1)$ 。

将这个式子代入等式可得
$P(B_2|B_1)=P(C|A)P(A)+P(C|\overline{A})P(\overline{A})$

这个等式在 $C$ 本身为事件的时候成立（事件即样本空间的子集），在这里 $C$ 为有条件的事件，就不一定成立了。

下面来找问题。

见参考1。（这里不作进一步举例）

回顾全概率公式定理：

设试验E的样本空间为 $S$，$A$ 为 $E$ 的事件，$B_1$，$B_2...B_n$ 为 $S$ 的一个划分，且$P(B_i)>0$，则

$P(A)=P(A|B1)+P(A|B2)+...+P(A|Bn)$ 

定理要求，$A$ 和 $B_i$ 属于同一样本空间，而答案中的 $C$ 为有条件的事件，是A所在样本空间的子集，故全概率分解错误。

## 五、相似的例子

可以参考B站李永乐老师的概率相关的一个视频。

参考：

1. https://www.zhihu.com/question/50081230?sort=created （张翼腾的答案）